"use strict";function createEl(t){var n=document.createElement("div");return n.innerHTML=t.trim(),n.firstChild}function createSvgEl(t){var n=createEl('\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t.trim()+"</svg>\n  ");return n}function createSvgChildEl(t){return createSvgEl(t).firstChild}function createLine(t){var n=createSvgChildEl('\n    <rect x="'+t.x+'" y="'+t.y+'" width="'+t.width+'" height="'+t.height+'" fill="'+t.color+'">\n  ');return n}function _animateStripes(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n.count=n.count||10,n.sizeRatio=n.sizeRatio||1;for(var e=[],o=function(o){var i=void 0;i=n.color?n.color:tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)").toRgbString();var a=Math.max(windowWidth,1e3),r=Math.round(a/10+Math.random()*a/10)*n.sizeRatio,s=Math.round(10*Math.random()+2)*n.sizeRatio,d=void 0;d=n.point?{x:Math.round(n.point.x-r/2+200*Math.random()-100),y:Math.round(n.point.y-s/2+50*Math.random()-25)}:{x:Math.round((windowWidth+r)*Math.random()-r),y:Math.round(windowHeight*Math.random())};var l={x:d.x,y:d.y,width:r,height:s,color:i},c=createLine(l);c.style.display="none",t.appendChild(c),dynamics.setTimeout(function(){c.style.display="block",dynamics.setTimeout(function(){l.x+=100*Math.random()-50,l.y+=20*Math.random()-10,c.setAttribute("x",l.x),c.setAttribute("y",l.y);var e=n.transform({width:l.width,height:l.height});c.setAttribute("width",e.width),c.setAttribute("height",e.height),dynamics.setTimeout(function(){t.removeChild(c)},n.delay("hide",o))},n.delay("transform",o))},n.delay("show",o)),e.push(c)},i=0;i<n.count;i++)o(i);return e}function animateBlackStripes(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n.sizeRatio=3,n.color="#101214",n.delay=function(t,e){return"show"===t?n.delayShow?50*Math.random():0:"transform"===t?20*Math.random()+2*e:"hide"===t?100:void 0},n.transform=function(t){return{width:t.width/2,height:t.height/5}},_animateStripes(t,n)}function animateColoredStripes(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n.delay=function(t,n){return"show"===t?300*Math.random():"transform"===t?20*Math.random():"hide"===t?100:void 0},n.transform=function(t){return{width:t.width/2,height:t.height/5}},_animateStripes(t,n)}function createMasksWithStripes(t,n){for(var e=arguments.length<=2||void 0===arguments[2]?10:arguments[2],o=[],i=0;i<t;i++)o.push([]);for(var a=[],r=totalMaskIdx;r<totalMaskIdx+o.length;r++)a.push("clipPath"+r);totalMaskIdx+=o.length;for(var s=0,d=0,l=0,c=e;;){var h=Math.max(10*c,Math.round(Math.random()*n.width));if(o[s].push("\n      M "+d+","+l+" L "+(d+h)+","+l+" L "+(d+h)+","+(l+c)+" L "+d+","+(l+c)+" Z\n    "),s+=1,s>=o.length&&(s=0),d+=h,d>n.width&&(d=0,l+=c,c=Math.round(Math.random()*e+e/2)),l>=n.height)break}return o.forEach(function(t,n){var e=createSvgChildEl('<clipPath id="'+a[n]+'">\n      <path d="'+t.join(" ")+'" fill="white"></path>\n    </clipPath>');document.querySelector("#clip-paths g").appendChild(e)}),a}function cloneAndStripeElement(t,n,e){var o=t.cloneNode(!0),i=t.getBoundingClientRect(),a=e.getBoundingClientRect();i={top:i.top-a.top,left:i.left-a.left,width:i.width,height:i.height};var r=window.getComputedStyle(t);return dynamics.css(o,{position:"absolute",left:Math.round(i.left+window.scrollX),top:Math.round(i.top+window.scrollY),width:Math.ceil(i.width),height:Math.ceil(i.height),display:"none",pointerEvents:"none",background:"#101214",fontSize:r.fontSize,fontFamily:r.fontFamily,color:r.color,textDecoration:r.textDecoration}),e.appendChild(o),o.style["-webkit-clip-path"]="url(/#"+n+")",o.style["clip-path"]="url(/#"+n+")",o}function showContent(){for(var t=0,n=function(n){var e=contentEls[n],o=50+Math.round(350*Math.random()),i={translateX:Math.round(40*Math.random()-20)},a=e.getAttribute("data-idx")<=3;dynamics.css(e,i),dynamics.setTimeout(function(){dynamics.css(e,{display:""})},o),t=Math.max(t,o),dynamics.setTimeout(function(){dynamics.css(e,{translateX:Math.round(i.translateX/-5)})},o+100),dynamics.setTimeout(function(){dynamics.css(e,{translateX:0,translateY:0}),a||e.parentNode.removeChild(e)},o+150),a&&(dynamics.setTimeout(function(){dynamics.css(e,{translateX:Math.round(i.translateX/-2)})},o+300),dynamics.setTimeout(function(){e.parentNode.removeChild(e)},o+550))},e=0;e<contentEls.length;e++)n(e);dynamics.setTimeout(function(){for(var t=0;t<originalContentEls.length;t++)originalContentEls[t].style.visibility="visible"},t)}var pageEl=document.querySelector("#page"),introEl=document.querySelector("#intro"),stripesEl=document.querySelector("#stripes"),logoContainer=document.querySelector("#logo-container"),logo=logoContainer.querySelector("svg"),logoPath=logo.querySelector("path"),windowWidth=document.body.clientWidth,windowHeight=document.body.clientHeight,totalMaskIdx=0,contentEls=[],originalContentEls=document.querySelectorAll("#header-content, #content");(function(){for(var t=originalContentEls,n=(pageEl.getBoundingClientRect(),0);n<t.length;n++){for(var e=t[n],o=e.getBoundingClientRect(),i=createMasksWithStripes(6,o),a=0;a<i.length;a++){var r=cloneAndStripeElement(e,i[a],pageEl);r.setAttribute("data-idx",a),contentEls.push(r);for(var s=r.querySelectorAll("h2, ul > li > a, a.more, h1, p, path"),d=0;d<s.length;d++){var l=tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)"),c=l.toRgbString();dynamics.css(s[d],{color:c,fill:c})}}e.style.visibility="hidden"}})(),function(){function t(){dynamics.css(logoContainer,{scale:.5,translateX:100*Math.random()-50}),dynamics.setTimeout(function(){dynamics.css(logoContainer,{translateX:10,scale:.55})},100),dynamics.setTimeout(function(){dynamics.css(logoContainer,{translateX:0,scale:.5})},150)}animateBlackStripes(stripesEl,{count:200}),animateColoredStripes(stripesEl,{count:100}),dynamics.css(pageEl,{scale:.95}),dynamics.animate(pageEl,{scale:1},{type:dynamics.easeInOut,friction:500,duration:4e3}),dynamics.css(logo,{scale:1}),dynamics.animate(logo,{scale:.9},{duration:1500,type:dynamics.easeOut});var n=tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)");dynamics.animate(logoPath,{fill:n.toRgbString()},{duration:700}),n=tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)"),dynamics.animate(logoPath,{fill:n.toRgbString()},{duration:700,delay:700}),t(),dynamics.setTimeout(function(){logoContainer.style.visibility="visible"},1),dynamics.setTimeout(function(){t(),animateBlackStripes(stripesEl,{count:200,delayShow:!0}),animateColoredStripes(stripesEl,{count:100})},1e3),dynamics.setTimeout(function(){introEl.style.backgroundColor="transparent",dynamics.css(logoContainer,{scale:1,translateX:Math.random()*windowWidth-windowWidth/2,translateY:Math.random()*windowHeight-windowHeight/2}),showContent()},1300),dynamics.setTimeout(function(){dynamics.css(logoContainer,{scale:.75})},1350),dynamics.setTimeout(function(){logo.style.display="none"},1400),dynamics.setTimeout(function(){document.body.removeChild(introEl)},3e3)}(),function(){function t(){for(var t=document.querySelector("#header-logo"),n=t.getBoundingClientRect(),e=10+10*Math.random(),o=createMasksWithStripes(e,n,Math.round(100/e)),i=[],a=0;a<o.length;a++){var r=cloneAndStripeElement(t,o[a],document.body),s=r.querySelector("path"),d=tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)");dynamics.css(s,{fill:d.toRgbString()}),i.push(r)}for(var l=function(t){var n=i[t],e=100*Math.random();dynamics.setTimeout(function(){n.style.display="",dynamics.css(n,{translateX:100*Math.random()-50})},e),dynamics.setTimeout(function(){dynamics.css(n,{translateX:20*Math.random()-10})},e+50),dynamics.setTimeout(function(){dynamics.css(n,{translateX:5*Math.random()-2.5})},e+100),dynamics.setTimeout(function(){document.body.removeChild(n)},e+150)},c=0;c<i.length;c++)l(c)}function n(){dynamics.setTimeout(function(){t(),n()},100+5e3*Math.random())}function e(t){for(var n=t.target;n&&"a"!==n.tagName.toLowerCase();)n=n.parentNode;if(n){var e=o(n),i=function t(o){n.removeEventListener("mouseout",t),e.stop()};n.addEventListener("mouseout",i)}}function o(t){var n=!0,e=t.getBoundingClientRect(),o=function o(){for(var i=createMasksWithStripes(3,e,3),a=[],r=0;r<i.length;r++){var s=cloneAndStripeElement(t,i[r],document.body),d=Array.prototype.slice.apply(s.querySelectorAll("path"));d.push(s);for(var l=0;l<d.length;l++){var c=tinycolor("hsl("+Math.round(360*Math.random())+", 80%, 65%)"),h=c.toRgbString();dynamics.css(d[l],{color:h,fill:h})}s.style.display="",a.push(s)}for(var u=function(t){var n=a[t];dynamics.css(n,{translateX:10*Math.random()-5}),dynamics.setTimeout(function(){dynamics.css(n,{translateX:0})},50),dynamics.setTimeout(function(){dynamics.css(n,{translateX:5*Math.random()-2.5})},100),dynamics.setTimeout(function(){document.body.removeChild(n)},150)},m=0;m<a.length;m++)u(m);dynamics.setTimeout(function(){n&&o();for(var t=0;t<i.length;t++){var e=document.querySelector("#"+i[t]);e.parentNode.removeChild(e)}},1e3*Math.random())};return o(),{stop:function(){n=!1}}}document.querySelector("#page-stripes");var i=document.querySelectorAll("a");if(dynamics.setTimeout(n,4e3),document.querySelector("#header-logo").addEventListener("mouseover",t),!("ontouchstart"in window))for(var a=0;a<i.length;a++)i[a].addEventListener("mouseover",e)}();
